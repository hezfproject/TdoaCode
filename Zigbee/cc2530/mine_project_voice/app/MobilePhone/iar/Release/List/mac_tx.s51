///////////////////////////////////////////////////////////////////////////////
//                                                                            /
// IAR C/C++ Compiler V7.60.1.40026 for 8051            23/Oct/2018  17:27:22 /
// Copyright (C) 2004-2010 IAR Systems AB.                                    /
//                                                                            /
//    Core               =  plain                                             /
//    Code model         =  banked                                            /
//    Data model         =  large                                             /
//    Calling convention =  xdata reentrant                                   /
//    Constant location  =  data_rom                                          /
//    Dptr setup         =  1,16                                              /
//    Source file        =  E:\p4\main\Zigbee\cc2530\mine_project_voice\third /
//                          _party\TIMAC-CC2530-1.3.1\Components\mac\low_leve /
//                          l\srf04\mac_tx.c                                  /
//    Command line       =  E:\p4\main\Zigbee\cc2530\mine_project_voice\third /
//                          _party\TIMAC-CC2530-1.3.1\Components\mac\low_leve /
//                          l\srf04\mac_tx.c -D xSMS_TEMPLATE -D              /
//                          MENU_CLOCKFORMAT -D CELLSWITCH_DEBUG -D           /
//                          MP_INFORMATION -D HOLD_AUTO_START -D SMS_SENDBOX  /
//                          -D NEW_MENU_LIB -D WATCHDOG=TRUE -D               /
//                          NEW_DOUBLE_NVID_OP -D AUDIO_SERIAL -D             /
//                          NWK_AUTO_POLL -D OSC32K_CRYSTAL_INSTALLED=FALSE   /
//                          -D xAUDIO_TEST -D xSINGLE_AUDIO_TEST -D           /
//                          xMULTIAUDIO_TEST -D xREFLECTOR -D xLCD_SUPPORTED  /
//                          -D HAL_LCD=FALSE -D HAL_AUDIO=TRUE -D             /
//                          HAL_SPI=FALSE -D HAL_UART=FALSE -D HAL_LED=FALSE  /
//                          -D HAL_AES=FALSE -D HAL_KEY=TRUE -D               /
//                          IDX_THRESHOLD=12 -D xMACNODEBUG -D                /
//                          xMAC_NO_PARAM_CHECK -D HAL_AUDIO=TRUE -D          /
//                          HAL_DMA=TRUE -D HAL_AES=FALSE -D                  /
//                          MAC_CFG_TX_DATA_MAX=8 -D MAC_CFG_TX_MAX=12 -D     /
//                          MAC_CFG_RX_MAX=8 -lcN E:\p4\main\Zigbee\cc2530\mi /
//                          ne_project_voice\app\MobilePhone\iar\Release\List /
//                          \ -lb E:\p4\main\Zigbee\cc2530\mine_project_voice /
//                          \app\MobilePhone\iar\Release\List\ -o             /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\Release\Obj\ -e                    /
//                          --require_prototypes --no_unroll --no_inline      /
//                          --no_code_motion --debug --core=plain             /
//                          --dptr=16,1 --data_model=large                    /
//                          --code_model=banked --calling_convention=xdata_re /
//                          entrant --place_constants=data_rom                /
//                          --nr_virtual_regs 16 -I                           /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\src\ -I                         /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\src\MenuLib\ -I                 /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\src\MenuLib\util\ -I            /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\..\..\third_party\TIMAC-CC2530- /
//                          1.3.1\COMPONENTS\MAC\INCLUDE\ -I                  /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\..\..\third_party\TIMAC-CC2530- /
//                          1.3.1\COMPONENTS\MAC\HIGH_LEVEL\ -I               /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\..\..\third_party\TIMAC-CC2530- /
//                          1.3.1\COMPONENTS\MAC\LOW_LEVEL\ -I                /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\..\..\third_party\TIMAC-CC2530- /
//                          1.3.1\COMPONENTS\MAC\LOW_LEVEL\SRF04\ -I          /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\..\..\third_party\TIMAC-CC2530- /
//                          1.3.1\COMPONENTS\MAC\LOW_LEVEL\SRF04\SINGLE_CHIP\ /
//                           -I E:\p4\main\Zigbee\cc2530\mine_project_voice\a /
//                          pp\MobilePhone\iar\..\..\..\third_party\TIMAC-CC2 /
//                          530-1.3.1\COMPONENTS\OSAL\INCLUDE\ -I             /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\..\..\third_party\TIMAC-CC2530- /
//                          1.3.1\COMPONENTS\OSAL\MCU\CC2530\ -I              /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\..\..\third_party\TIMAC-CC2530- /
//                          1.3.1\COMPONENTS\SERVICES\SADDR\ -I               /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\..\..\third_party\TIMAC-CC2530- /
//                          1.3.1\COMPONENTS\SERVICES\SDATA\ -I               /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\..\..\third_party\TIMAC-CC2530- /
//                          1.3.1\COMPONENTS\MT\ -I                           /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\..\..\..\..\..\common\ -I       /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\..\..\..\..\common\lcd\ -I      /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\..\..\..\..\..\common\2g\ -I    /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\..\..\..\..\..\ -I              /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\..\..\driver\ -I                /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\..\..\util\ -I                  /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\..\..\driver\include\ -I        /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\..\..\driver\common\ -I         /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\..\..\driver\MobilePhone\ -I    /
//                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\..\..\..\driver\MobilePhone\audio\ /
//                           -I E:\p4\main\Zigbee\cc2530\mine_project_voice\a /
//                          pp\MobilePhone\iar\..\..\..\driver\MobilePhone\co /
//                          mmon\ -I E:\p4\main\Zigbee\cc2530\mine_project_vo /
//                          ice\app\MobilePhone\iar\..\..\..\driver\MobilePho /
//                          ne\key\ -I E:\p4\main\Zigbee\cc2530\mine_project_ /
//                          voice\app\MobilePhone\iar\..\..\..\driver\MobileP /
//                          hone\lcd\ -I E:\p4\main\Zigbee\cc2530\mine_projec /
//                          t_voice\app\MobilePhone\iar\..\..\..\driver\Mobil /
//                          ePhone\ioexpand\ -I "C:\Program Files\IAR         /
//                          Systems\Embedded Workbench 5.4\8051\INC\" -I      /
//                          "C:\Program Files\IAR Systems\Embedded Workbench  /
//                          5.4\8051\INC\CLIB\" -Ohs                          /
//    List file          =  E:\p4\main\Zigbee\cc2530\mine_project_voice\app\M /
//                          obilePhone\iar\Release\List\mac_tx.s51            /
//                                                                            /
//                                                                            /
///////////////////////////////////////////////////////////////////////////////

        NAME mac_tx

        RSEG DOVERLAY:DATA:NOROOT(0)
        RSEG IOVERLAY:IDATA:NOROOT(0)
        RSEG ISTACK:IDATA:NOROOT(0)
        RSEG PSTACK:XDATA:NOROOT(0)
        RSEG XSTACK:XDATA:NOROOT(0)

        EXTERN ?BANKED_ENTER_XDATA
        EXTERN ?BANKED_LEAVE_XDATA
        EXTERN ?BDISPATCH
        EXTERN ?BRET
        EXTERN ?L_MOV_TO_X
        EXTERN ?S_SHL
        EXTERN ?V0
        EXTERN __INIT_XDATA_Z

        PUBLIC ??macTxAckNotReceivedCallback?relay
        PUBLIC ??macTxAckReceivedCallback?relay
        PUBLIC ??macTxChannelBusyCallback?relay
        PUBLIC ??macTxCollisionWithRxCallback?relay
        PUBLIC ??macTxDoneCallback?relay
        PUBLIC ??macTxFrame?relay
        PUBLIC ??macTxFrameRetransmit?relay
        PUBLIC ??macTxHaltCleanup?relay
        PUBLIC ??macTxInit?relay
        PUBLIC ??macTxStartQueuedFrame?relay
        PUBLIC ??macTxTimestampCallback?relay
        PUBWEAK RFST
        PUBWEAK _A_IEN0
        PUBLIC macTxAckNotReceivedCallback
        PUBLIC macTxAckReceivedCallback
        PUBLIC macTxActive
        PUBLIC macTxBe
        PUBLIC macTxChannelBusyCallback
        PUBLIC macTxCollisionWithRxCallback
        PUBLIC macTxCsmaBackoffDelay
        PUBLIC macTxDoneCallback
        PUBLIC macTxFrame
        PUBLIC macTxFrameRetransmit
        PUBLIC macTxHaltCleanup
        PUBLIC macTxInit
        PUBLIC macTxSlottedDelay
        PUBLIC macTxStartQueuedFrame
        PUBLIC macTxTimestampCallback
        PUBLIC macTxType

macCspTxReset       SYMBOL "macCspTxReset"
halAssertHandler    SYMBOL "halAssertHandler"
macCspTxPrepSlotted SYMBOL "macCspTxPrepSlotted"
macMemWriteTxFifo   SYMBOL "macMemWriteTxFifo"
macRadioRandomByte  SYMBOL "macRadioRandomByte"
macCspTxPrepCsmaSlotted SYMBOL "macCspTxPrepCsmaSlotted"
macCspTxPrepCsmaUnslotted SYMBOL "macCspTxPrepCsmaUnslotted"
macCspTxGoSlotted   SYMBOL "macCspTxGoSlotted"
macDataTxTimeAvailable SYMBOL "macDataTxTimeAvailable"
macCspTxGoCsma      SYMBOL "macCspTxGoCsma"
macRxOffRequest     SYMBOL "macRxOffRequest"
macCspTxRequestAckTimeoutCallback SYMBOL "macCspTxRequestAckTimeoutCallback"
macCspTxCancelAckTimeoutCallback SYMBOL "macCspTxCancelAckTimeoutCallback"
macRadioUpdateTxPower SYMBOL "macRadioUpdateTxPower"
macRadioUpdateChannel SYMBOL "macRadioUpdateChannel"
macTxCompleteCallback SYMBOL "macTxCompleteCallback"
macBackoffTimerCapture SYMBOL "macBackoffTimerCapture"
macMcuTimerCapture  SYMBOL "macMcuTimerCapture"
macRxHaltCleanup    SYMBOL "macRxHaltCleanup"
??halAssertHandler?relay SYMBOL "?relay", halAssertHandler
??macBackoffTimerCapture?relay SYMBOL "?relay", macBackoffTimerCapture
??macCspTxCancelAckTimeoutCallback?relay SYMBOL "?relay", macCspTxCancelAckTimeoutCallback
??macCspTxGoCsma?relay SYMBOL "?relay", macCspTxGoCsma
??macCspTxGoSlotted?relay SYMBOL "?relay", macCspTxGoSlotted
??macCspTxPrepCsmaSlotted?relay SYMBOL "?relay", macCspTxPrepCsmaSlotted
??macCspTxPrepCsmaUnslotted?relay SYMBOL "?relay", macCspTxPrepCsmaUnslotted
??macCspTxPrepSlotted?relay SYMBOL "?relay", macCspTxPrepSlotted
??macCspTxRequestAckTimeoutCallback?relay SYMBOL "?relay", macCspTxRequestAckTimeoutCallback
??macCspTxReset?relay SYMBOL "?relay", macCspTxReset
??macDataTxTimeAvailable?relay SYMBOL "?relay", macDataTxTimeAvailable
??macMcuTimerCapture?relay SYMBOL "?relay", macMcuTimerCapture
??macMemWriteTxFifo?relay SYMBOL "?relay", macMemWriteTxFifo
??macRadioRandomByte?relay SYMBOL "?relay", macRadioRandomByte
??macRadioUpdateChannel?relay SYMBOL "?relay", macRadioUpdateChannel
??macRadioUpdateTxPower?relay SYMBOL "?relay", macRadioUpdateTxPower
??macRxHaltCleanup?relay SYMBOL "?relay", macRxHaltCleanup
??macRxOffRequest?relay SYMBOL "?relay", macRxOffRequest
??macTxCompleteCallback?relay SYMBOL "?relay", macTxCompleteCallback
macTxAckNotReceivedCallback SYMBOL "macTxAckNotReceivedCallback"
??macTxAckNotReceivedCallback?relay SYMBOL "?relay", macTxAckNotReceivedCallback
macTxAckReceivedCallback SYMBOL "macTxAckReceivedCallback"
??macTxAckReceivedCallback?relay SYMBOL "?relay", macTxAckReceivedCallback
macTxChannelBusyCallback SYMBOL "macTxChannelBusyCallback"
??macTxChannelBusyCallback?relay SYMBOL "?relay", macTxChannelBusyCallback
macTxCollisionWithRxCallback SYMBOL "macTxCollisionWithRxCallback"
??macTxCollisionWithRxCallback?relay SYMBOL "?relay", macTxCollisionWithRxCallback
macTxDoneCallback   SYMBOL "macTxDoneCallback"
??macTxDoneCallback?relay SYMBOL "?relay", macTxDoneCallback
macTxFrame          SYMBOL "macTxFrame"
??macTxFrame?relay  SYMBOL "?relay", macTxFrame
macTxFrameRetransmit SYMBOL "macTxFrameRetransmit"
??macTxFrameRetransmit?relay SYMBOL "?relay", macTxFrameRetransmit
macTxHaltCleanup    SYMBOL "macTxHaltCleanup"
??macTxHaltCleanup?relay SYMBOL "?relay", macTxHaltCleanup
macTxInit           SYMBOL "macTxInit"
??macTxInit?relay   SYMBOL "?relay", macTxInit
macTxStartQueuedFrame SYMBOL "macTxStartQueuedFrame"
??macTxStartQueuedFrame?relay SYMBOL "?relay", macTxStartQueuedFrame
macTxTimestampCallback SYMBOL "macTxTimestampCallback"
??macTxTimestampCallback?relay SYMBOL "?relay", macTxTimestampCallback

        EXTERN macCspTxReset
        EXTERN halAssertHandler
        EXTERN macCspTxPrepSlotted
        EXTERN macMemWriteTxFifo
        EXTERN macRadioRandomByte
        EXTERN macCspTxPrepCsmaSlotted
        EXTERN macCspTxPrepCsmaUnslotted
        EXTERN macCspTxGoSlotted
        EXTERN macDataTxTimeAvailable
        EXTERN macCspTxGoCsma
        EXTERN macRxOffRequest
        EXTERN macCspTxRequestAckTimeoutCallback
        EXTERN macCspTxCancelAckTimeoutCallback
        EXTERN macRadioUpdateTxPower
        EXTERN macRadioUpdateChannel
        EXTERN macTxCompleteCallback
        EXTERN macBackoffTimerCapture
        EXTERN macMcuTimerCapture
        EXTERN macRxHaltCleanup
        EXTERN ??halAssertHandler?relay
        EXTERN ??macBackoffTimerCapture?relay
        EXTERN ??macCspTxCancelAckTimeoutCallback?relay
        EXTERN ??macCspTxGoCsma?relay
        EXTERN ??macCspTxGoSlotted?relay
        EXTERN ??macCspTxPrepCsmaSlotted?relay
        EXTERN ??macCspTxPrepCsmaUnslotted?relay
        EXTERN ??macCspTxPrepSlotted?relay
        EXTERN ??macCspTxRequestAckTimeoutCallback?relay
        EXTERN ??macCspTxReset?relay
        EXTERN ??macDataTxTimeAvailable?relay
        EXTERN ??macMcuTimerCapture?relay
        EXTERN ??macMemWriteTxFifo?relay
        EXTERN ??macRadioRandomByte?relay
        EXTERN ??macRadioUpdateChannel?relay
        EXTERN ??macRadioUpdateTxPower?relay
        EXTERN ??macRxHaltCleanup?relay
        EXTERN ??macRxOffRequest?relay
        EXTERN ??macTxCompleteCallback?relay
        EXTERN macPib
        EXTERN macRxActive
        EXTERN macRxOutgoingAckFlag
        EXTERN macSleepState
        EXTERN pMacDataTx


        ASEGN SFR_AN:DATA:NOROOT,0a8H
// union <unnamed> volatile __sfr _A_IEN0
_A_IEN0:
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0e1H
// unsigned char volatile __sfr RFST
RFST:
        DS 1

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA
macTxSlottedDelay:
        DB 3

        RSEG XDATA_Z:XDATA:NOROOT(0)
macTxActive:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
macTxType:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
macTxBe:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
macTxCsmaBackoffDelay:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
nb:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
txSeqn:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
txAckReq:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
txRetransmitFlag:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG BANKED_CODE:CODE:NOROOT(0)
macTxInit:
        PUSH    DPL
        PUSH    DPH
        ; Saved register size: 2
        ; Auto size: 0
        CLR     A
        MOV     DPTR,#macTxActive
        MOVX    @DPTR,A
        MOV     DPTR,#txRetransmitFlag
        MOVX    @DPTR,A
        LJMP    ?Subroutine0 & 0xFFFF

        RSEG BANKED_CODE:CODE:NOROOT(0)
macTxHaltCleanup:
        PUSH    DPL
        PUSH    DPH
        ; Saved register size: 2
        ; Auto size: 0
        ; Setup parameters for call to function macCspTxReset
        LCALL   ??macCspTxReset?relay
        ; Setup parameters for call to function macTxInit
        LCALL   ??macTxInit?relay
        LJMP    ?Subroutine0 & 0xFFFF

        RSEG BANKED_CODE:CODE:NOROOT(0)
macTxFrame:
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        ; Saved register size: 9
        ; Auto size: 0
        MOV     A,R1
        MOV     R6,A
        MOV     DPTR,#macTxActive
        MOVX    A,@DPTR
        JZ      ??macTxFrame_0
        ; Setup parameters for call to function halAssertHandler
        LCALL   ??halAssertHandler?relay
??macTxFrame_0:
        MOV     A,#0x1
        MOV     DPTR,#macTxActive
        MOVX    @DPTR,A
        MOV     DPTR,#macSleepState
        MOVX    A,@DPTR
        JZ      ??macTxFrame_1
        ; Setup parameters for call to function txComplete
        MOV     R1,#0x1d
        LCALL   ??txComplete?relay
        LJMP    ??macTxFrame_2 & 0xFFFF
??macTxFrame_1:
        MOV     A,R6
        MOV     DPTR,#macTxType
        MOVX    @DPTR,A
        XRL     A,#0x2
        JNZ     ??macTxFrame_3
        ; Setup parameters for call to function macCspTxPrepSlotted
        LCALL   ??macCspTxPrepSlotted?relay
        SJMP    ??macTxFrame_4
??macTxFrame_3:
        MOVX    A,@DPTR
        JZ      ??macTxFrame_5
        XRL     A,#0x1
        JZ      ??macTxFrame_5
        ; Setup parameters for call to function halAssertHandler
        LCALL   ??halAssertHandler?relay
??macTxFrame_5:
        CLR     A
        MOV     DPTR,#nb
        MOVX    @DPTR,A
        MOV     DPTR,#pMacDataTx
        MOVX    A,@DPTR
        ADD     A,#0xe
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,#0x0
        MOV     R1,A
        MOV     DPL,R0
        MOV     DPH,R1
        MOVX    A,@DPTR
        MOV     C,0xE0 /* A   */.6
        JNC     ??macTxFrame_6
        MOV     DPTR,#(macPib + 58)
        SJMP    ??macTxFrame_7
??macTxFrame_6:
        MOV     DPTR,#(macPib + 28)
??macTxFrame_7:
        MOVX    A,@DPTR
        MOV     DPTR,#macTxBe
        MOVX    @DPTR,A
        MOV     DPTR,#macTxType
        MOVX    A,@DPTR
        JNZ     ??macTxFrame_8
        MOV     DPTR,#(macPib + 3)
        MOVX    A,@DPTR
        JZ      ??macTxFrame_8
        MOV     DPTR,#macTxBe
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0x3
        JC      ??macTxFrame_9
        MOV     A,#0x2
        SJMP    ??macTxFrame_10
??macTxFrame_9:
        MOVX    A,@DPTR
??macTxFrame_10:
        MOVX    @DPTR,A
??macTxFrame_8:
        ; Setup parameters for call to function txCsmaPrep
        LCALL   ??txCsmaPrep?relay
??macTxFrame_4:
        MOV     DPTR,#txRetransmitFlag
        MOVX    A,@DPTR
        JNZ     ??macTxFrame_11
        MOV     DPTR,#pMacDataTx
        MOVX    A,@DPTR
        JNZ     ??macTxFrame_12
        INC     DPTR
        MOVX    A,@DPTR
??macTxFrame_12:
        JNZ     ??macTxFrame_13
        ; Setup parameters for call to function halAssertHandler
        LCALL   ??halAssertHandler?relay
??macTxFrame_13:
        MOV     DPTR,#pMacDataTx
        MOVX    A,@DPTR
        ADD     A,#0x2
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,#0x0
        MOV     R1,A
        MOV     DPL,R0
        MOV     DPH,R1
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R2
        MOVX    A,@DPTR
        ANL     A,#0x20
        MOV     DPTR,#txAckReq
        MOVX    @DPTR,A
        MOV     DPL,R0
        MOV     DPH,R1
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R2
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPTR,#txSeqn
        MOVX    @DPTR,A
        MOV     DPTR,#pMacDataTx
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R2
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     DPL,R0
        MOV     DPH,R1
        MOVX    A,@DPTR
        ADD     A,#-0x1
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,#-0x1
        MOV     R1,A
        MOV     DPL,R0
        MOV     DPH,R1
        MOV     A,#0x2
        ADD     A,R2
        MOVX    @DPTR,A
        MOV     0xe1,#-0x12
        ; Setup parameters for call to function macMemWriteTxFifo
        MOV     A,#0x1
        ADD     A,R2
        MOV     R1,A
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??macMemWriteTxFifo?relay
??macTxFrame_11:
        MOV     C,0xa8.7
        CLR     A
        MOV     0xE0 /* A   */.0,C
        MOV     R2,A
        CLR     0xa8.7
        MOV     DPTR,#macRxActive
        MOVX    A,@DPTR
        JNZ     ??macTxFrame_14
        MOV     DPTR,#macRxOutgoingAckFlag
        MOVX    A,@DPTR
        JNZ     ??macTxFrame_14
        MOV     A,#-0x7d
        MOV     DPTR,#macTxActive
        MOVX    @DPTR,A
        MOV     A,R2
        MOV     C,0xE0 /* A   */.0
        MOV     0xa8.7,C
        ; Setup parameters for call to function txGo
        LCALL   ??txGo?relay
        SJMP    ??macTxFrame_2
??macTxFrame_14:
        MOV     A,#0x2
        MOV     DPTR,#macTxActive
        MOVX    @DPTR,A
        MOV     A,R2
        MOV     C,0xE0 /* A   */.0
        MOV     0xa8.7,C
??macTxFrame_2:
        LJMP    ?Subroutine1 & 0xFFFF
        REQUIRE _A_IEN0
        REQUIRE RFST

        RSEG BANKED_CODE:CODE:NOROOT(0)
txCsmaPrep:
        MOV     A,#-0xa
        LCALL   ?BANKED_ENTER_XDATA
        ; Saved register size: 10
        ; Auto size: 0
        ; Setup parameters for call to function macRadioRandomByte
        LCALL   ??macRadioRandomByte?relay
        MOV     A,R1
        MOV     R2,A
        MOV     ?V0 + 0,#0x1
        MOV     ?V0 + 1,#0x0
        MOV     DPTR,#macTxBe
        MOVX    A,@DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?S_SHL
        MOV     A,?V0 + 0
        DEC     A
        ANL     A,R2
        MOV     DPTR,#macTxCsmaBackoffDelay
        MOVX    @DPTR,A
        MOV     DPTR,#macTxType
        MOVX    A,@DPTR
        JNZ     ??txCsmaPrep_0
        ; Setup parameters for call to function macCspTxPrepCsmaSlotted
        LCALL   ??macCspTxPrepCsmaSlotted?relay
        SJMP    ??txCsmaPrep_1
??txCsmaPrep_0:
        ; Setup parameters for call to function macCspTxPrepCsmaUnslotted
        LCALL   ??macCspTxPrepCsmaUnslotted?relay
??txCsmaPrep_1:
        MOV     R7,#0x2
        LJMP    ?BANKED_LEAVE_XDATA

        RSEG BANKED_CODE:CODE:NOROOT(0)
txGo:
        PUSH    DPL
        PUSH    DPH
        ; Saved register size: 2
        ; Auto size: 0
        MOV     DPTR,#0x61a4
        MOVX    A,@DPTR
        CLR     0xE0 /* A   */.0
        MOVX    @DPTR,A
        CLR     A
        MOV     DPTR,#macRxOutgoingAckFlag
        MOVX    @DPTR,A
        MOV     DPTR,#macTxType
        MOVX    A,@DPTR
        XRL     A,#0x2
        JNZ     ??txGo_0
        ; Setup parameters for call to function macCspTxGoSlotted
        LCALL   ??macCspTxGoSlotted?relay
        SJMP    ??txGo_1
??txGo_0:
        ; Setup parameters for call to function txCsmaGo
        LCALL   ??txCsmaGo?relay
??txGo_1:
        SJMP    ?Subroutine0

        RSEG BANKED_CODE:CODE:NOROOT(0)
txCsmaGo:
        PUSH    DPL
        PUSH    DPH
        ; Saved register size: 2
        ; Auto size: 0
        MOV     DPTR,#macTxType
        MOVX    A,@DPTR
        JNZ     ??txCsmaGo_0
        ; Setup parameters for call to function macDataTxTimeAvailable
        LCALL   ??macDataTxTimeAvailable?relay
        MOV     A,R1
        MOV     R2,A
        MOV     DPTR,#macTxCsmaBackoffDelay
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,R2
        JC      ??txCsmaGo_0
        ; Setup parameters for call to function txComplete
        MOV     R1,#0x1c
        LCALL   ??txComplete?relay
        SJMP    ??txCsmaGo_1
??txCsmaGo_0:
        ; Setup parameters for call to function macCspTxGoCsma
        LCALL   ??macCspTxGoCsma?relay
??txCsmaGo_1:
        SJMP    ?Subroutine0

        RSEG BANKED_CODE:CODE:NOROOT(0)
macTxFrameRetransmit:
        PUSH    DPL
        PUSH    DPH
        ; Saved register size: 2
        ; Auto size: 0
        MOV     A,#0x1
        MOV     DPTR,#txRetransmitFlag
        MOVX    @DPTR,A
        ; Setup parameters for call to function macTxFrame
        MOV     DPTR,#macTxType
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??macTxFrame?relay
        REQUIRE ?Subroutine0
        ; // Fall through to label ?Subroutine0

        RSEG BANKED_CODE:CODE:NOROOT(0)
?Subroutine0:
        POP     DPH
        POP     DPL
        LJMP    ?BRET

        RSEG BANKED_CODE:CODE:NOROOT(0)
macTxStartQueuedFrame:
        PUSH    DPL
        PUSH    DPH
        ; Saved register size: 2
        ; Auto size: 0
        MOV     DPTR,#macRxActive
        MOVX    A,@DPTR
        JNZ     ??macTxStartQueuedFrame_0
        MOV     DPTR,#macRxOutgoingAckFlag
        MOVX    A,@DPTR
        JZ      ??macTxStartQueuedFrame_1
??macTxStartQueuedFrame_0:
        ; Setup parameters for call to function halAssertHandler
        LCALL   ??halAssertHandler?relay
??macTxStartQueuedFrame_1:
        MOV     C,0xa8.7
        CLR     A
        MOV     0xE0 /* A   */.0,C
        MOV     R2,A
        CLR     0xa8.7
        MOV     DPTR,#macTxActive
        MOVX    A,@DPTR
        XRL     A,#0x2
        JNZ     ??macTxStartQueuedFrame_2
        MOV     A,#-0x7d
        MOVX    @DPTR,A
        MOV     A,R2
        MOV     C,0xE0 /* A   */.0
        MOV     0xa8.7,C
        ; Setup parameters for call to function txGo
        LCALL   ??txGo?relay
        SJMP    ??macTxStartQueuedFrame_3
??macTxStartQueuedFrame_2:
        MOV     A,R2
        MOV     C,0xE0 /* A   */.0
        MOV     0xa8.7,C
??macTxStartQueuedFrame_3:
        SJMP    ?Subroutine0
        REQUIRE _A_IEN0

        RSEG BANKED_CODE:CODE:NOROOT(0)
macTxChannelBusyCallback:
        PUSH    DPL
        PUSH    DPH
        ; Saved register size: 2
        ; Auto size: 0
        MOV     DPTR,#macTxType
        MOVX    A,@DPTR
        JZ      ??macTxChannelBusyCallback_0
        XRL     A,#0x1
        JZ      ??macTxChannelBusyCallback_0
        ; Setup parameters for call to function halAssertHandler
        LCALL   ??halAssertHandler?relay
??macTxChannelBusyCallback_0:
        MOV     A,#0x4
        MOV     DPTR,#macTxActive
        MOVX    @DPTR,A
        ; Setup parameters for call to function macRxOffRequest
        LCALL   ??macRxOffRequest?relay
        MOV     DPTR,#nb
        MOVX    A,@DPTR
        INC     A
        MOVX    @DPTR,A
        MOV     DPTR,#(macPib + 27)
        MOVX    A,@DPTR
        PUSH    A
        MOV     DPTR,#nb
        MOVX    A,@DPTR
        MOV     R2,A
        POP     A
        CLR     C
        SUBB    A,R2
        JNC     ??macTxChannelBusyCallback_1
        ; Setup parameters for call to function txComplete
        MOV     R1,#-0x1f
        LCALL   ??txComplete?relay
        SJMP    ??macTxChannelBusyCallback_2
??macTxChannelBusyCallback_1:
        MOV     DPTR,#macTxBe
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     A,#0x1
        ADD     A,R0
        INC     R0
        CLR     A
        ADDC    A,#0x0
        MOV     R1,A
        MOV     DPTR,#(macPib + 39)
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     A,R0
        SUBB    A,R2
        MOV     A,R1
        SUBB    A,#0x0
        CLR     C
        XRL     A,PSW
        RLC     A
        JNC     ??macTxChannelBusyCallback_3
        MOV     DPTR,#macTxBe
        MOVX    A,@DPTR
        INC     A
        SJMP    ??macTxChannelBusyCallback_4
??macTxChannelBusyCallback_3:
        MOVX    A,@DPTR
??macTxChannelBusyCallback_4:
        MOV     DPTR,#macTxBe
        MOVX    @DPTR,A
        ; Setup parameters for call to function txCsmaPrep
        LCALL   ??txCsmaPrep?relay
        MOV     A,#-0x7d
        MOV     DPTR,#macTxActive
        MOVX    @DPTR,A
        ; Setup parameters for call to function txCsmaGo
        LCALL   ??txCsmaGo?relay
??macTxChannelBusyCallback_2:
        LJMP    ?Subroutine0 & 0xFFFF

        RSEG BANKED_CODE:CODE:NOROOT(0)
macTxDoneCallback:
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        ; Saved register size: 9
        ; Auto size: 0
        MOV     C,0xa8.7
        CLR     A
        MOV     0xE0 /* A   */.0,C
        MOV     R6,A
        CLR     0xa8.7
        MOV     DPTR,#macTxActive
        MOVX    A,@DPTR
        XRL     A,#0x83
        JNZ     ??macTxDoneCallback_0
        MOV     DPTR,#txAckReq
        MOVX    A,@DPTR
        JNZ     ??macTxDoneCallback_1
        MOV     A,#-0x7b
        MOV     DPTR,#macTxActive
        MOVX    @DPTR,A
        MOV     A,R6
        MOV     C,0xE0 /* A   */.0
        MOV     0xa8.7,C
        ; Setup parameters for call to function txComplete
        MOV     R1,#0x0
        LCALL   ??txComplete?relay
        SJMP    ??macTxDoneCallback_2
??macTxDoneCallback_1:
        MOV     A,#-0x7a
        MOV     DPTR,#macTxActive
        MOVX    @DPTR,A
        ; Setup parameters for call to function macCspTxRequestAckTimeoutCallback
        LCALL   ??macCspTxRequestAckTimeoutCallback?relay
??macTxDoneCallback_0:
        MOV     A,R6
        MOV     C,0xE0 /* A   */.0
        MOV     0xa8.7,C
??macTxDoneCallback_2:
        SJMP    ?Subroutine1
        REQUIRE _A_IEN0

        RSEG BANKED_CODE:CODE:NOROOT(0)
macTxAckReceivedCallback:
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        ; Saved register size: 9
        ; Auto size: 0
        MOV     A,R1
        MOV     R6,A
        MOV     A,R2
        MOV     R7,A
        MOV     C,0xa8.7
        CLR     A
        MOV     0xE0 /* A   */.0,C
        MOV     ?V0 + 0,A
        CLR     0xa8.7
        MOV     DPTR,#macTxActive
        MOVX    A,@DPTR
        XRL     A,#0x86
        JNZ     ??macTxAckReceivedCallback_0
        MOV     A,#-0x79
        MOVX    @DPTR,A
        ; Setup parameters for call to function macCspTxCancelAckTimeoutCallback
        LCALL   ??macCspTxCancelAckTimeoutCallback?relay
        MOV     A,?V0 + 0
        MOV     C,0xE0 /* A   */.0
        MOV     0xa8.7,C
        MOV     DPTR,#txSeqn
        MOVX    A,@DPTR
        XRL     A,R6
        JNZ     ??macTxAckReceivedCallback_1
        MOV     A,R7
        JZ      ??macTxAckReceivedCallback_2
        ; Setup parameters for call to function txComplete
        MOV     R1,#0x1b
??macTxAckReceivedCallback_3:
        LCALL   ??txComplete?relay
        SJMP    ??macTxAckReceivedCallback_4
??macTxAckReceivedCallback_2:
        ; Setup parameters for call to function txComplete
        MOV     R1,#0x0
        SJMP    ??macTxAckReceivedCallback_3
??macTxAckReceivedCallback_1:
        ; Setup parameters for call to function txComplete
        MOV     R1,#-0x17
        LCALL   ??txComplete?relay
        SJMP    ??macTxAckReceivedCallback_4
??macTxAckReceivedCallback_0:
        MOV     A,?V0 + 0
        MOV     C,0xE0 /* A   */.0
        MOV     0xa8.7,C
??macTxAckReceivedCallback_4:
        REQUIRE ?Subroutine1
        REQUIRE _A_IEN0
        ; // Fall through to label ?Subroutine1

        RSEG BANKED_CODE:CODE:NOROOT(0)
?Subroutine1:
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA

        RSEG BANKED_CODE:CODE:NOROOT(0)
macTxAckNotReceivedCallback:
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        ; Saved register size: 9
        ; Auto size: 0
        MOV     C,0xa8.7
        CLR     A
        MOV     0xE0 /* A   */.0,C
        MOV     R6,A
        CLR     0xa8.7
        MOV     DPTR,#macTxActive
        MOVX    A,@DPTR
        XRL     A,#0x86
        JNZ     ??macTxAckNotReceivedCallback_0
        MOV     A,#-0x79
        MOVX    @DPTR,A
        ; Setup parameters for call to function macCspTxCancelAckTimeoutCallback
        LCALL   ??macCspTxCancelAckTimeoutCallback?relay
        MOV     A,R6
        MOV     C,0xE0 /* A   */.0
        MOV     0xa8.7,C
        ; Setup parameters for call to function txComplete
        MOV     R1,#-0x17
        LCALL   ??txComplete?relay
        SJMP    ??macTxAckNotReceivedCallback_1
??macTxAckNotReceivedCallback_0:
        MOV     A,R6
        MOV     C,0xE0 /* A   */.0
        MOV     0xa8.7,C
??macTxAckNotReceivedCallback_1:
        SJMP    ?Subroutine1
        REQUIRE _A_IEN0

        RSEG BANKED_CODE:CODE:NOROOT(0)
txComplete:
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        ; Saved register size: 9
        ; Auto size: 0
        MOV     A,R1
        MOV     R6,A
        CLR     A
        MOV     DPTR,#txRetransmitFlag
        MOVX    @DPTR,A
        MOV     DPTR,#macTxActive
        MOVX    @DPTR,A
        ; Setup parameters for call to function macRxOffRequest
        LCALL   ??macRxOffRequest?relay
        ; Setup parameters for call to function macRadioUpdateTxPower
        LCALL   ??macRadioUpdateTxPower?relay
        ; Setup parameters for call to function macRadioUpdateChannel
        LCALL   ??macRadioUpdateChannel?relay
        ; Setup parameters for call to function macTxCompleteCallback
        MOV     A,R6
        MOV     R1,A
        LCALL   ??macTxCompleteCallback?relay
        SJMP    ?Subroutine1

        RSEG BANKED_CODE:CODE:NOROOT(0)
macTxTimestampCallback:
        MOV     A,#-0xc
        LCALL   ?BANKED_ENTER_XDATA
        ; Saved register size: 12
        ; Auto size: 0
        MOV     DPTR,#pMacDataTx
        MOVX    A,@DPTR
        JNZ     ??macTxTimestampCallback_0
        INC     DPTR
        MOVX    A,@DPTR
??macTxTimestampCallback_0:
        JNZ     ??macTxTimestampCallback_1
        ; Setup parameters for call to function halAssertHandler
        LCALL   ??halAssertHandler?relay
??macTxTimestampCallback_1:
        ; Setup parameters for call to function macBackoffTimerCapture
        LCALL   ??macBackoffTimerCapture?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     ?V0 + 2,R4
        MOV     ?V0 + 3,R5
        MOV     DPTR,#pMacDataTx
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
        ; Setup parameters for call to function macMcuTimerCapture
        LCALL   ??macMcuTimerCapture?relay
        MOV     ?V0 + 0,R2
        MOV     DPTR,#pMacDataTx
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R2
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,?V0 + 0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        MOV     R7,#0x4
        LJMP    ?BANKED_LEAVE_XDATA

        RSEG BANKED_CODE:CODE:NOROOT(0)
macTxCollisionWithRxCallback:
        PUSH    DPL
        PUSH    DPH
        ; Saved register size: 2
        ; Auto size: 0
        ; Setup parameters for call to function macRxHaltCleanup
        LCALL   ??macRxHaltCleanup?relay
        LJMP    ?Subroutine0 & 0xFFFF

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??macTxInit?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    macTxInit

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??macTxHaltCleanup?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    macTxHaltCleanup

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??macTxFrame?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    macTxFrame

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??txCsmaPrep?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    txCsmaPrep

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??txGo?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    txGo

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??txCsmaGo?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    txCsmaGo

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??macTxFrameRetransmit?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    macTxFrameRetransmit

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??macTxStartQueuedFrame?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    macTxStartQueuedFrame

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??macTxChannelBusyCallback?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    macTxChannelBusyCallback

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??macTxDoneCallback?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    macTxDoneCallback

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??macTxAckReceivedCallback?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    macTxAckReceivedCallback

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??macTxAckNotReceivedCallback?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    macTxAckNotReceivedCallback

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??txComplete?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    txComplete

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??macTxTimestampCallback?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    macTxTimestampCallback

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??macTxCollisionWithRxCallback?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    macTxCollisionWithRxCallback

        END
// 
// 954 bytes in segment BANKED_CODE
//  90 bytes in segment BANK_RELAYS
//   2 bytes in segment SFR_AN
//   1 byte  in segment XDATA_ROM_C
//   8 bytes in segment XDATA_Z
// 
// 1 044 bytes of CODE  memory
//     1 byte  of CONST memory
//     0 bytes of DATA  memory (+ 2 bytes shared)
//     8 bytes of XDATA memory
//
//Errors: none
//Warnings: none
