###############################################################################
#                                                                             #
# IAR C/C++ Compiler V7.60.1.40026 for 8051             23/Oct/2018  17:27:27 #
# Copyright (C) 2004-2010 IAR Systems AB.                                     #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  E:\p4\main\Zigbee\cc2530\mine_project_voice\driver #
#                          \MobilePhone\ioexpand\i2c.c                        #
#    Command line       =  E:\p4\main\Zigbee\cc2530\mine_project_voice\driver #
#                          \MobilePhone\ioexpand\i2c.c -D xSMS_TEMPLATE -D    #
#                          MENU_CLOCKFORMAT -D CELLSWITCH_DEBUG -D            #
#                          MP_INFORMATION -D HOLD_AUTO_START -D SMS_SENDBOX   #
#                          -D NEW_MENU_LIB -D WATCHDOG=TRUE -D                #
#                          NEW_DOUBLE_NVID_OP -D AUDIO_SERIAL -D              #
#                          NWK_AUTO_POLL -D OSC32K_CRYSTAL_INSTALLED=FALSE    #
#                          -D xAUDIO_TEST -D xSINGLE_AUDIO_TEST -D            #
#                          xMULTIAUDIO_TEST -D xREFLECTOR -D xLCD_SUPPORTED   #
#                          -D HAL_LCD=FALSE -D HAL_AUDIO=TRUE -D              #
#                          HAL_SPI=FALSE -D HAL_UART=FALSE -D HAL_LED=FALSE   #
#                          -D HAL_AES=FALSE -D HAL_KEY=TRUE -D                #
#                          IDX_THRESHOLD=12 -D xMACNODEBUG -D                 #
#                          xMAC_NO_PARAM_CHECK -D HAL_AUDIO=TRUE -D           #
#                          HAL_DMA=TRUE -D HAL_AES=FALSE -D                   #
#                          MAC_CFG_TX_DATA_MAX=8 -D MAC_CFG_TX_MAX=12 -D      #
#                          MAC_CFG_RX_MAX=8 -lcN E:\p4\main\Zigbee\cc2530\min #
#                          e_project_voice\app\MobilePhone\iar\Release\List\  #
#                          -lb E:\p4\main\Zigbee\cc2530\mine_project_voice\ap #
#                          p\MobilePhone\iar\Release\List\ -o                 #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\Release\Obj\ -e                      #
#                          --require_prototypes --no_unroll --no_inline       #
#                          --no_code_motion --debug --core=plain --dptr=16,1  #
#                          --data_model=large --code_model=banked             #
#                          --calling_convention=xdata_reentrant               #
#                          --place_constants=data_rom --nr_virtual_regs 16    #
#                          -I E:\p4\main\Zigbee\cc2530\mine_project_voice\app #
#                          \MobilePhone\iar\..\src\ -I                        #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\src\MenuLib\ -I                   #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\src\MenuLib\util\ -I              #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\third_party\TIMAC-CC2530-1. #
#                          3.1\COMPONENTS\MAC\INCLUDE\ -I                     #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\third_party\TIMAC-CC2530-1. #
#                          3.1\COMPONENTS\MAC\HIGH_LEVEL\ -I                  #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\third_party\TIMAC-CC2530-1. #
#                          3.1\COMPONENTS\MAC\LOW_LEVEL\ -I                   #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\third_party\TIMAC-CC2530-1. #
#                          3.1\COMPONENTS\MAC\LOW_LEVEL\SRF04\ -I             #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\third_party\TIMAC-CC2530-1. #
#                          3.1\COMPONENTS\MAC\LOW_LEVEL\SRF04\SINGLE_CHIP\    #
#                          -I E:\p4\main\Zigbee\cc2530\mine_project_voice\app #
#                          \MobilePhone\iar\..\..\..\third_party\TIMAC-CC2530 #
#                          -1.3.1\COMPONENTS\OSAL\INCLUDE\ -I                 #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\third_party\TIMAC-CC2530-1. #
#                          3.1\COMPONENTS\OSAL\MCU\CC2530\ -I                 #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\third_party\TIMAC-CC2530-1. #
#                          3.1\COMPONENTS\SERVICES\SADDR\ -I                  #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\third_party\TIMAC-CC2530-1. #
#                          3.1\COMPONENTS\SERVICES\SDATA\ -I                  #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\third_party\TIMAC-CC2530-1. #
#                          3.1\COMPONENTS\MT\ -I E:\p4\main\Zigbee\cc2530\min #
#                          e_project_voice\app\MobilePhone\iar\..\..\..\..\.. #
#                          \..\common\ -I E:\p4\main\Zigbee\cc2530\mine_proje #
#                          ct_voice\app\MobilePhone\iar\..\..\..\..\..\common #
#                          \lcd\ -I E:\p4\main\Zigbee\cc2530\mine_project_voi #
#                          ce\app\MobilePhone\iar\..\..\..\..\..\..\common\2g #
#                          \ -I E:\p4\main\Zigbee\cc2530\mine_project_voice\a #
#                          pp\MobilePhone\iar\..\..\..\..\..\..\ -I           #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\driver\ -I                  #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\util\ -I                    #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\driver\include\ -I          #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\driver\common\ -I           #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\driver\MobilePhone\ -I      #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\driver\MobilePhone\audio\   #
#                          -I E:\p4\main\Zigbee\cc2530\mine_project_voice\app #
#                          \MobilePhone\iar\..\..\..\driver\MobilePhone\commo #
#                          n\ -I E:\p4\main\Zigbee\cc2530\mine_project_voice\ #
#                          app\MobilePhone\iar\..\..\..\driver\MobilePhone\ke #
#                          y\ -I E:\p4\main\Zigbee\cc2530\mine_project_voice\ #
#                          app\MobilePhone\iar\..\..\..\driver\MobilePhone\lc #
#                          d\ -I E:\p4\main\Zigbee\cc2530\mine_project_voice\ #
#                          app\MobilePhone\iar\..\..\..\driver\MobilePhone\io #
#                          expand\ -I "C:\Program Files\IAR Systems\Embedded  #
#                          Workbench 5.4\8051\INC\" -I "C:\Program Files\IAR  #
#                          Systems\Embedded Workbench 5.4\8051\INC\CLIB\"     #
#                          -Ohs                                               #
#    List file          =  E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\Release\List\i2c.lst                 #
#    Object file        =  E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\Release\Obj\i2c.r51                  #
#                                                                             #
#                                                                             #
###############################################################################

E:\p4\main\Zigbee\cc2530\mine_project_voice\driver\MobilePhone\ioexpand\i2c.c
      1          /*
      2          I2C.c
      3          标准80C51单片机模拟I2C总线的主机程序
      4          Copyright (c) 2005，广州周立功单片机发展有限公司
      5          All rights reserved.
      6          本程序仅供学习参考，不提供任何可靠性方面的担保；请勿用于商业目的
      7          */
      8          
      9          #include <ioCC2530.h>
     10          #include "i2c.h"
     11          #include "delay.h"
     12          
     13          //模拟I2C总线的引脚定义
     14          
     15          #define I2C_SCL     (P2_3)
     16          #define I2C_SDA     (P0_6)
     17          
     18          #define I2C_SCL_SETIN    (P2DIR &= ~BV(3))
     19          #define I2C_SCL_SETOUT  (P2DIR |= BV(3))
     20          
     21          #define I2C_SDA_SETIN    (P0DIR &= ~BV(6))
     22          #define I2C_SDA_SETOUT (P0DIR |= BV(6))
     23          
     24          
     25          //定义I2C总线停止后在下一次开始之前的等待时间，取值1～65535
     26          //等待时间约为(I2C_STOP_WAIT_VALUE*8)个机器周期
     27          //对于多数器件取值为1即可；但对于某些器件来说，较长的延时是必须的
     28          #define I2C_STOP_WAIT_VALUE 120
     29          
     30          /*
     31          宏定义：I2C_Delay()
     32          功能：延时，模拟I2C总线专用
     33          */
     34          #define I2C_Delay()  st(DelayUs(5);)
     35          
     36          
     37          /*
     38          函数：I2C_Init()
     39          功能：I2C总线初始化，使总线处于空闲状态
     40          说明：在main()函数的开始处，通常应当要执行一次本函数
     41          */
     42          void I2C_Init()
     43          {
     44          
     45          }
     46          
     47          
     48          
     49          /*
     50          函数：I2C_Puts()
     51          功能：I2C总线综合发送函数，向从机发送多个字节的数据
     52          参数：
     53          SlaveAddr：从机地址（7位纯地址，不含读写位）
     54          SubAddr：从机的子地址
     55          SubMod：子地址模式，0－无子地址，1－单字节子地址，2－双字节子地址
     56          *dat：要发送的数据
     57          Size：数据的字节数
     58          返回：
     59          0：发送成功
     60          1：在发送过程中出现异常
     61          说明：
     62          本函数能够很好地适应所有常见的I2C器件，不论其是否有子地址
     63          当从机没有子地址时，参数SubAddr任意，而SubMod应当为0
     64          */
     65          unsigned char I2C_Puts
     66          (
     67              unsigned char SlaveAddr,
     68              unsigned char *pSubAddr,
     69              unsigned char SubMod,
     70              unsigned char *dat,
     71              unsigned int Size
     72          )
     73          {
     74          }
     75          
     76          /*
     77          函数：I2C_Gets()
     78          功能：I2C总线综合接收函数，从从机接收多个字节的数据
     79          参数：
     80          SlaveAddr：从机地址（7位纯地址，不含读写位）
     81          SubAddr：从机的子地址
     82          SubMod：子地址模式，0－无子地址，1－单字节子地址，2－双字节子地址
     83          *dat：保存接收到的数据
     84          Size：数据的字节数
     85          返回：
     86          0：接收成功
     87          1：在接收过程中出现异常
     88          说明：
     89          本函数能够很好地适应所有常见的I2C器件，不论其是否有子地址
     90          当从机没有子地址时，参数SubAddr任意，而SubMod应当为0
     91          */
     92          unsigned char I2C_Gets
     93          (
     94              unsigned char SlaveAddr,
     95              unsigned char *pSubAddr,
     96              unsigned char SubMod,
     97              unsigned char *dat,
     98              unsigned int Size
     99          )
    100          {
    101          
    102              return 0;
    103          }
    104          
    105          
    106          /*
    107          函数：I2C_Close()
    108          功能：关闭I2C总线
    109          */
    110          void I2C_Close()
    111          {
    112          
    113          }

   Maximum stack usage in bytes:

     Function  ISTACK PSTACK XSTACK
     --------  ------ ------ ------
     I2C_Close     0      0      0
     I2C_Gets      0      0      4
     I2C_Init      0      0      0
     I2C_Puts      0      0      4


   Segment part sizes:

     Function/Label    Bytes
     --------------    -----
     I2C_Init             3
     I2C_Puts             3
     I2C_Gets             5
     I2C_Close            3
     ??I2C_Init?relay     6
     ??I2C_Puts?relay     6
     ??I2C_Gets?relay     6
     ??I2C_Close?relay    6

 
 14 bytes in segment BANKED_CODE
 24 bytes in segment BANK_RELAYS
 
 38 bytes of CODE memory

Errors: none
Warnings: 1
