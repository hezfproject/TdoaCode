###############################################################################
#                                                                             #
# IAR C/C++ Compiler V7.60.1.40026 for 8051             23/Oct/2018  17:27:28 #
# Copyright (C) 2004-2010 IAR Systems AB.                                     #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  E:\p4\main\Zigbee\cc2530\mine_project_voice\third_ #
#                          party\TIMAC-CC2530-1.3.1\Components\mac\low_level\ #
#                          srf04\single_chip\mac_radio_defs.c                 #
#    Command line       =  E:\p4\main\Zigbee\cc2530\mine_project_voice\third_ #
#                          party\TIMAC-CC2530-1.3.1\Components\mac\low_level\ #
#                          srf04\single_chip\mac_radio_defs.c -D              #
#                          xSMS_TEMPLATE -D MENU_CLOCKFORMAT -D               #
#                          CELLSWITCH_DEBUG -D MP_INFORMATION -D              #
#                          HOLD_AUTO_START -D SMS_SENDBOX -D NEW_MENU_LIB -D  #
#                          WATCHDOG=TRUE -D NEW_DOUBLE_NVID_OP -D             #
#                          AUDIO_SERIAL -D NWK_AUTO_POLL -D                   #
#                          OSC32K_CRYSTAL_INSTALLED=FALSE -D xAUDIO_TEST -D   #
#                          xSINGLE_AUDIO_TEST -D xMULTIAUDIO_TEST -D          #
#                          xREFLECTOR -D xLCD_SUPPORTED -D HAL_LCD=FALSE -D   #
#                          HAL_AUDIO=TRUE -D HAL_SPI=FALSE -D HAL_UART=FALSE  #
#                          -D HAL_LED=FALSE -D HAL_AES=FALSE -D HAL_KEY=TRUE  #
#                          -D IDX_THRESHOLD=12 -D xMACNODEBUG -D              #
#                          xMAC_NO_PARAM_CHECK -D HAL_AUDIO=TRUE -D           #
#                          HAL_DMA=TRUE -D HAL_AES=FALSE -D                   #
#                          MAC_CFG_TX_DATA_MAX=8 -D MAC_CFG_TX_MAX=12 -D      #
#                          MAC_CFG_RX_MAX=8 -lcN E:\p4\main\Zigbee\cc2530\min #
#                          e_project_voice\app\MobilePhone\iar\Release\List\  #
#                          -lb E:\p4\main\Zigbee\cc2530\mine_project_voice\ap #
#                          p\MobilePhone\iar\Release\List\ -o                 #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\Release\Obj\ -e                      #
#                          --require_prototypes --no_unroll --no_inline       #
#                          --no_code_motion --debug --core=plain --dptr=16,1  #
#                          --data_model=large --code_model=banked             #
#                          --calling_convention=xdata_reentrant               #
#                          --place_constants=data_rom --nr_virtual_regs 16    #
#                          -I E:\p4\main\Zigbee\cc2530\mine_project_voice\app #
#                          \MobilePhone\iar\..\src\ -I                        #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\src\MenuLib\ -I                   #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\src\MenuLib\util\ -I              #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\third_party\TIMAC-CC2530-1. #
#                          3.1\COMPONENTS\MAC\INCLUDE\ -I                     #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\third_party\TIMAC-CC2530-1. #
#                          3.1\COMPONENTS\MAC\HIGH_LEVEL\ -I                  #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\third_party\TIMAC-CC2530-1. #
#                          3.1\COMPONENTS\MAC\LOW_LEVEL\ -I                   #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\third_party\TIMAC-CC2530-1. #
#                          3.1\COMPONENTS\MAC\LOW_LEVEL\SRF04\ -I             #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\third_party\TIMAC-CC2530-1. #
#                          3.1\COMPONENTS\MAC\LOW_LEVEL\SRF04\SINGLE_CHIP\    #
#                          -I E:\p4\main\Zigbee\cc2530\mine_project_voice\app #
#                          \MobilePhone\iar\..\..\..\third_party\TIMAC-CC2530 #
#                          -1.3.1\COMPONENTS\OSAL\INCLUDE\ -I                 #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\third_party\TIMAC-CC2530-1. #
#                          3.1\COMPONENTS\OSAL\MCU\CC2530\ -I                 #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\third_party\TIMAC-CC2530-1. #
#                          3.1\COMPONENTS\SERVICES\SADDR\ -I                  #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\third_party\TIMAC-CC2530-1. #
#                          3.1\COMPONENTS\SERVICES\SDATA\ -I                  #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\third_party\TIMAC-CC2530-1. #
#                          3.1\COMPONENTS\MT\ -I E:\p4\main\Zigbee\cc2530\min #
#                          e_project_voice\app\MobilePhone\iar\..\..\..\..\.. #
#                          \..\common\ -I E:\p4\main\Zigbee\cc2530\mine_proje #
#                          ct_voice\app\MobilePhone\iar\..\..\..\..\..\common #
#                          \lcd\ -I E:\p4\main\Zigbee\cc2530\mine_project_voi #
#                          ce\app\MobilePhone\iar\..\..\..\..\..\..\common\2g #
#                          \ -I E:\p4\main\Zigbee\cc2530\mine_project_voice\a #
#                          pp\MobilePhone\iar\..\..\..\..\..\..\ -I           #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\driver\ -I                  #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\util\ -I                    #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\driver\include\ -I          #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\driver\common\ -I           #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\driver\MobilePhone\ -I      #
#                          E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\..\..\..\driver\MobilePhone\audio\   #
#                          -I E:\p4\main\Zigbee\cc2530\mine_project_voice\app #
#                          \MobilePhone\iar\..\..\..\driver\MobilePhone\commo #
#                          n\ -I E:\p4\main\Zigbee\cc2530\mine_project_voice\ #
#                          app\MobilePhone\iar\..\..\..\driver\MobilePhone\ke #
#                          y\ -I E:\p4\main\Zigbee\cc2530\mine_project_voice\ #
#                          app\MobilePhone\iar\..\..\..\driver\MobilePhone\lc #
#                          d\ -I E:\p4\main\Zigbee\cc2530\mine_project_voice\ #
#                          app\MobilePhone\iar\..\..\..\driver\MobilePhone\io #
#                          expand\ -I "C:\Program Files\IAR Systems\Embedded  #
#                          Workbench 5.4\8051\INC\" -I "C:\Program Files\IAR  #
#                          Systems\Embedded Workbench 5.4\8051\INC\CLIB\"     #
#                          -Ohs                                               #
#    List file          =  E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\Release\List\mac_radio_defs.lst      #
#    Object file        =  E:\p4\main\Zigbee\cc2530\mine_project_voice\app\Mo #
#                          bilePhone\iar\Release\Obj\mac_radio_defs.r51       #
#                                                                             #
#                                                                             #
###############################################################################

E:\p4\main\Zigbee\cc2530\mine_project_voice\third_party\TIMAC-CC2530-1.3.1\Components\mac\low_level\srf04\single_chip\mac_radio_defs.c
      1          /**************************************************************************************************
      2            Filename:       mac_radio_defs.c
      3            Revised:        $Date: 2011/03/14 18:43:37 $
      4            Revision:       $Revision: 1.1 $
      5          
      6            Description:    Describe the purpose and contents of the file.
      7          
      8          
      9            Copyright 2006-2010 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          /* ------------------------------------------------------------------------------------------------
     41           *                                             Includes
     42           * ------------------------------------------------------------------------------------------------
     43           */
     44          #include "mac_radio_defs.h"
     45          #include "hal_types.h"
     46          #include "hal_assert.h"
     47          #include "hal_mcu.h"
     48          #include "mac_pib.h"
     49          
     50          
     51          /* ------------------------------------------------------------------------------------------------
     52           *                                        Global Constants
     53           * ------------------------------------------------------------------------------------------------
     54           */
     55          #if defined MAC_RUNTIME_CC2591 || defined MAC_RUNTIME_CC2590 || \
     56            (!defined HAL_PA_LNA && !defined HAL_PA_LNA_CC2590)
     57          
     58          #ifdef HAL_MCU_CC2533
     59          const uint8 CODE macRadioDefsTxPwrBare[] =
     60          {
     61            4,  /* tramsmit power level of the first entry */
     62            (uint8)(int8)-21, /* transmit power level of the last entry */
     63            /*   4 dBm */   0xEC,   /* characterized as  4.5 dBm in datasheet */
     64            /*   3 dBm */   0xDC,   /* characterized as  3   dBm in datasheet */
     65            /*   2 dBm */   0xCC,   /* characterized as  1.7 dBm in datasheet */
     66            /*   1 dBm */   0xCC,
     67            /*   0 dBm */   0xBC,   /* characterized as  0.3 dBm in datasheet */
     68            /*  -1 dBm */   0xAC,   /* characterized as -1   dBm in datasheet */
     69            /*  -2 dBm */   0xAC,
     70            /*  -3 dBm */   0x9C,   /* characterized as -2.8 dBm in datasheet */
     71            /*  -4 dBm */   0x8C,   /* characterized as -4.1 dBm in datasheet */
     72            /*  -5 dBm */   0x8C,
     73            /*  -6 dBm */   0x7C,   /* characterized as -5.9 dBm in datasheet */
     74            /*  -7 dBm */   0x7C,
     75            /*  -8 dBm */   0x6C,   /* characterized as -7.7 dBm in datasheet */
     76            /*  -9 dBm */   0x6C,
     77            /* -10 dBm */   0x5C,   /* characterized as -9.9 dBm in datasheet */
     78            /* -11 dBm */   0x5C,
     79            /* -12 dBm */   0x4C,   /* characterized as -12.4 dBm in datasheet */
     80            /* -13 dBm */   0x4C,
     81            /* -14 dBm */   0x4C,
     82            /* -15 dBm */   0x3C,   /* characterized as -14.9 dBm in datasheet */
     83            /* -16 dBm */   0x3C,
     84            /* -17 dBm */   0x2C,   /* characterized as -16.6 dBm in datasheet */
     85            /* -18 dBm */   0x2C,
     86            /* -19 dBm */   0x1C,   /* characterized as -18.7 dBm in datasheet */
     87            /* -20 dBm */   0x0C,   /* characterized as -20.4 dBm in datasheet */
     88            /* -21 dBm */   0x0C
     89          };
     90          #else /* HAL_MCU_CC2533 */
     91          const uint8 CODE macRadioDefsTxPwrBare[] =
     92          {
     93            3,  /* tramsmit power level of the first entry */
     94            (uint8)(int8)-22, /* transmit power level of the last entry */
     95            /*   3 dBm */   0xF5,   /* characterized as  4.5 dBm in datasheet */
     96            /*   2 dBm */   0xE5,   /* characterized as  2.5 dBm in datasheet */
     97            /*   1 dBm */   0xD5,   /* characterized as  1   dBm in datasheet */
     98            /*   0 dBm */   0xD5,   /* characterized as  1   dBm in datasheet */
     99            /*  -1 dBm */   0xC5,   /* characterized as -0.5 dBm in datasheet */
    100            /*  -2 dBm */   0xB5,   /* characterized as -1.5 dBm in datasheet */
    101            /*  -3 dBm */   0xA5,   /* characterized as -3   dBm in datasheet */
    102            /*  -4 dBm */   0x95,   /* characterized as -4   dBm in datasheet */
    103            /*  -5 dBm */   0x95,
    104            /*  -6 dBm */   0x85,   /* characterized as -6   dBm in datasheet */
    105            /*  -7 dBm */   0x85,
    106            /*  -8 dBm */   0x75,   /* characterized as -8   dBm in datasheet */
    107            /*  -9 dBm */   0x75,
    108            /* -10 dBm */   0x65,   /* characterized as -10  dBm in datasheet */
    109            /* -11 dBm */   0x65,
    110            /* -12 dBm */   0x55,   /* characterized as -12  dBm in datasheet */
    111            /* -13 dBm */   0x55,
    112            /* -14 dBm */   0x45,   /* characterized as -14  dBm in datasheet */
    113            /* -15 dBm */   0x45,
    114            /* -16 dBm */   0x35,   /* characterized as -16  dBm in datasheet */
    115            /* -17 dBm */   0x35,
    116            /* -18 dBm */   0x25,   /* characterized as -18  dBm in datasheet */
    117            /* -19 dBm */   0x25,
    118            /* -20 dBm */   0x15,   /* characterized as -20  dBm in datasheet */
    119            /* -21 dBm */   0x15,
    120            /* -22 dBm */   0x05    /* characterized as -22  dBm in datasheet */
    121          };
    122          #endif /* HAL_MCU_CC2533 */
    123          #endif /* defined MAC_RUNTIME_CC2591 || defined MAC_RUNTIME_CC2590 ||
    124                    (!defined HAL_PA_LNA && !defined HAL_PA_LNA_CC2590) */
    125          
    126          #if defined HAL_PA_LNA || defined MAC_RUNTIME_CC2591
    127          const uint8 CODE macRadioDefsTxPwrCC2591[] =
    128          {
    129            20,  /* tramsmit power level of the first entry */
    130            (uint8)(int8)10, /* transmit power level of the last entry */
    131            /*  20 dBm */   0xE5,   /* characterized as 20 dBm in datasheet */
    132            /*  19 dBm */   0xD5,   /* characterized as 19 dBm in datasheet */
    133            /*  18 dBm */   0xC5,   /* characterized as 18 dBm in datasheet */
    134            /*  17 dBm */   0xB5,   /* characterized as 17 dBm in datasheet */
    135            /*  16 dBm */   0xA5,   /* characterized as 16 dBm in datasheet */
    136            /*  15 dBm */   0xA5,
    137            /*  14 dBm */   0x95,   /* characterized as 14.5 dBm in datasheet */
    138            /*  13 dBm */   0x85,   /* characterized as 13 dBm in datasheet */
    139            /*  12 dBm */   0x85,
    140            /*  11 dBm */   0x75,   /* characterized as 11.5 dBm in datasheet */
    141            /*  10 dBm */   0x65    /* characterized as 10 dBm in datasheet */
    142          };
    143          #endif
    144          
    145          
    146          /* Placeholder for CC2590 */
    147          #if defined HAL_PA_LNA_CC2590 || defined MAC_RUNTIME_CC2590
    148          const uint8 CODE macRadioDefsTxPwrCC2590[] =
    149          {
    150            11,  /* tramsmit power level of the first entry */
    151            (uint8)(int8)-12, /* transmit power level of the last entry */
    152            /* Note that the characterization is preliminary */
    153            /* 11 dBm */   0xF5,   /* characterized as 11.8 dBm */
    154            /* 10 dBm */   0xE5,   /* characterized as 10.6 dBm */
    155            /*  9 dBm */   0xD5,   /* characterized as 9.5 dBm */
    156            /*  8 dBm */   0xC5,   /* characterized as 8.5 dBm */
    157            /*  7 dBm */   0xB5,   /* characterized as 7.6 dBm */
    158            /*  6 dBm */   0xA5,   /* characterized as 6.4 dBm */
    159            /*  5 dBm */   0xA5,   /* characterized as 6.4 dBm */
    160            /*  4 dBm */   0x95,   /* characterized as 4.7 dBm */
    161            /*  3 dBm */   0x85,   /* characterized as 3.5 dBm */
    162            /*  2 dBm */   0x75,   /* characterized as 2.0 dBm */
    163            /*  1 dBm */   0x75,   /* characterized as 2.0 dBm */
    164            /*  0 dBm */   0x65,   /* characterized as 0.3 dBm */
    165            /* -1 dBm */   0x65,   /* characterized as 0.3 dBm */
    166            /* -2 dBm */   0x55,   /* characterized as -1.7 dBm */
    167            /* -3 dBm */   0x55,   /* characterized as -1.7 dBm */
    168            /* -4 dBm */   0x45,   /* characterized as -3.9 dBm */
    169            /* -5 dBm */   0x45,   /* characterized as -3.9 dBm */
    170            /* -6 dBm */   0x45,   /* characterized as -3.9 dBm */
    171            /* -7 dBm */   0x35,   /* characterized as -6.3 dBm*/
    172            /* -8 dBm */   0x25,   /* characterized as -7.8 dBm */
    173            /* -9 dBm */   0x25,   /* characterized as -7.8 dBm */
    174            /* -10 dBm */  0x15,   /* characterized as -9.8 dBm */
    175            /* -11 dBm */  0x15,   /* characterized as -9.8 dBm */
    176            /* -12 dBm */  0x05,   /* characterized as -11.8 dBm */
    177          };
    178          #endif
    179          
    180          #if defined MAC_RUNTIME_CC2591 || defined MAC_RUNTIME_CC2590 || \
    181            defined HAL_PA_LNA || defined HAL_PA_LNA_CC2590
    182          
    183          /* TX power table array */
    184          const uint8 CODE *const CODE macRadioDefsTxPwrTables[] =
    185          {
    186          #if defined MAC_RUNTIME_CC2591 || defined MAC_RUNTIME_CC2590 || \
    187            (!defined HAL_PA_LNA && !defined HAL_PA_LNA_CC2590)
    188            macRadioDefsTxPwrBare,
    189          #endif
    190          
    191          #if defined HAL_PA_LNA || defined MAC_RUNTIME_CC2591
    192            macRadioDefsTxPwrCC2591,
    193          #endif
    194          
    195          #if defined HAL_PA_LNA_CC2590 || defined MAC_RUNTIME_CC2590
    196            macRadioDefsTxPwrCC2590,
    197          #endif
    198          };
    199          
    200          /* RSSI offset adjustment value array */
    201          const int8 CODE macRadioDefsRssiAdj[] =
    202          {
    203          #if defined MAC_RUNTIME_CC2591 || defined MAC_RUNTIME_CC2590 || \
    204            (!defined HAL_PA_LNA && !defined HAL_PA_LNA_CC2590)
    205            0,
    206          #endif
    207          
    208          #if defined HAL_PA_LNA || defined MAC_RUNTIME_CC2591
    209            -6, /* high gain mode */
    210            6,  /* low gain mode */
    211          #endif
    212          
    213          #if defined HAL_PA_LNA_CC2590 || defined MAC_RUNTIME_CC2590
    214          -10,  /* TBD: place holder for high gain mode */
    215            0,  /* TBD: place holder for low gain mode */
    216          #endif
    217          };
    218          
    219          #endif /* defined MAC_RUNTIME_CC2591 || defined MAC_RUNTIME_CC2590 || ... */
    220          
    221          #if defined MAC_RUNTIME_CC2591 || defined MAC_RUNTIME_CC2590 || \
    222            defined HAL_PA_LNA || defined HAL_PA_LNA_CC2590
    223          uint8 macRadioDefsRefTableId = 0;
    224          #endif
    225          
    226          /* RF observable control register value to output PA signal */
    227          #define RFC_OBS_CTRL_PA_PD_INV        0x68
    228          
    229          /* RF observable control register value to output LNA signal */
    230          #define RFC_OBS_CTRL_LNAMIX_PD_INV    0x6A
    231          
    232          /* OBSSELn register value to select RF observable 0 */
    233          #define OBSSEL_OBS_CTRL0             0xFB
    234          
    235          /* OBSSELn register value to select RF observable 1 */
    236          #define OBSSEL_OBS_CTRL1             0xFC
    237          
    238          
    239          /**************************************************************************************************
    240           * @fn          MAC_SelectRadioRegTable
    241           *
    242           * @brief       Select radio register table in case multiple register tables are included
    243           *              in the build
    244           *
    245           * @param       txPwrTblIdx - TX power register value table index
    246           * @param       rssiAdjIdx - RSSI adjustment value index
    247           *
    248           * @return      none
    249           **************************************************************************************************
    250           */
    251          extern void MAC_SetRadioRegTable ( uint8 txPwrTblIdx, uint8 rssiAdjIdx )
    252          {
    253            /* Depending on compile flags, the parameters may not be used */
    254            (void) txPwrTblIdx;
    255            (void) rssiAdjIdx;
    256          
    257          #if defined MAC_RUNTIME_CC2591 || defined MAC_RUNTIME_CC2590
    258            if (txPwrTblIdx >= sizeof(macRadioDefsTxPwrTables)/sizeof(macRadioDefsTxPwrTables[0]))
    259            {
    260              txPwrTblIdx = 0;
    261            }
    262          #endif /* defined MAC_RUNTIME_CC2591 || defined MAC_RUNTIME_CC2590 */
    263          
    264          #if defined MAC_RUNTIME_CC2591 || defined MAC_RUNTIME_CC2590 || \
    265            defined HAL_PA_LNA || defined HAL_PA_LNA_CC2590
    266          
    267            if (rssiAdjIdx >= sizeof(macRadioDefsRssiAdj)/sizeof(macRadioDefsRssiAdj[0]))
    268            {
    269              rssiAdjIdx = 0;
    270            }
    271          
    272            macRadioDefsRefTableId = (txPwrTblIdx << 4) | rssiAdjIdx;
    273          
    274          #endif /* defined MAC_RUNTIME_CC2591 || defined MAC_RUNTIME_CC2590 || .. */
    275          }
    276          
    277          
    278          /**************************************************************************************************
    279           * @fn          macRadioTurnOnPower
    280           *
    281           * @brief       Logic and sequence for powering up the radio.
    282           *
    283           * @param       none
    284           *
    285           * @return      none
    286           **************************************************************************************************
    287           */
    288          MAC_INTERNAL_API void macRadioTurnOnPower(void)
    289          {
    290            /* Enable RF error trap */
    291            MAC_MCU_RFERR_ENABLE_INTERRUPT();
    292          
    293          #if defined MAC_RUNTIME_CC2591 || defined MAC_RUNTIME_CC2590
    294            /* table ID is referenced only when runtime configuratino is enabled */
    295            if (macRadioDefsRefTableId & 0xf0)
    296          #endif /* defined MAC_RUNTIME_CC2591 || defined MAC_RUNTIME_CC2590 */
    297          
    298          #if defined MAC_RUNTIME_CC2591 || defined MAC_RUNTIME_CC2590 || \
    299            defined HAL_PA_LNA || defined HAL_PA_LNA_CC2590
    300            { /* either if compound statement or non-conditional compound statement */
    301          
    302              /* (Re-)Configure PA and LNA control signals to RF frontend chips.
    303              * Note that The register values are not retained during sleep.
    304              */
    305          
    306              /* P1_1 -> PAEN */
    307              RFC_OBS_CTRL0 = RFC_OBS_CTRL_PA_PD_INV;
    308              OBSSEL1       = OBSSEL_OBS_CTRL0;
    309          #ifdef CardReader_PROJECT
    310              /* P1_3 -> EN (LNA control) */
    311              RFC_OBS_CTRL1 = RFC_OBS_CTRL_LNAMIX_PD_INV;
    312              OBSSEL3       = OBSSEL_OBS_CTRL1;
    313          
    314          #else
    315              /* P1_4 -> EN (LNA control) */
    316              //RFC_OBS_CTRL1 = RFC_OBS_CTRL_LNAMIX_PD_INV;
    317              //OBSSEL4       = OBSSEL_OBS_CTRL1;
    318          
    319              RFC_OBS_CTRL1 = RFC_OBS_CTRL_LNAMIX_PD_INV;
    320              OBSSEL3       = OBSSEL_OBS_CTRL1;
    321          
    322          #endif
    323            }
    324          #endif /* defined MAC_RUNTIME_CC2591 || ... || defined HAL_PA_LNA_CC2590 */
    325          
    326            if (macChipVersion <= REV_B)
    327            {
    328              /* radio initializations for disappearing RAM; PG1.0 and before only */
    329              MAC_RADIO_SET_PAN_ID(macPib.panId);
    330              MAC_RADIO_SET_SHORT_ADDR(macPib.shortAddress);
    331              MAC_RADIO_SET_IEEE_ADDR(macPib.extendedAddress.addr.extAddr);
    332            }
    333          
    334            /* Turn on frame filtering */
    335            MAC_RADIO_TURN_ON_RX_FRAME_FILTERING();
    336          }
    337          
    338          
    339          /**************************************************************************************************
    340           * @fn          macRadioTurnOffPower
    341           *
    342           * @brief       Logic and sequence for powering down the radio.
    343           *
    344           * @param       none
    345           *
    346           * @return      none
    347           **************************************************************************************************
    348           */
    349          MAC_INTERNAL_API void macRadioTurnOffPower(void)
    350          {
    351            /* Disable RF error trap */
    352            MAC_MCU_RFERR_DISABLE_INTERRUPT();
    353          }
    354          
    355          
    356          /**************************************************************************************************
    357           *                                  Compile Time Integrity Checks
    358           **************************************************************************************************
    359           */
    360          #if (HAL_CPU_CLOCK_MHZ != 32)
    361          #error "ERROR: The only tested/supported clock speed is 32 MHz."
    362          #endif
    363          
    364          #if (MAC_RADIO_RECEIVER_SENSITIVITY_DBM > MAC_SPEC_MIN_RECEIVER_SENSITIVITY)
    365          #error "ERROR: Radio sensitivity does not meet specification."
    366          #endif
    367          
    368          #if defined (HAL_PA_LNA) && defined (HAL_PA_LNA_CC2590)
    369          #error "ERROR: HAL_PA_LNA and HAL_PA_LNA_CC2590 cannot be both defined."
    370          #endif
    371          
    372          #if defined (HAL_PA_LNA) && defined (MAC_RUNTIME_CC2591)
    373          #error "ERROR: HAL_PA_LNA and MAC_RUNTIME_CC2591 cannot be both defined."
    374          #endif
    375          
    376          #if defined (HAL_PA_LNA_CC2590) && defined (MAC_RUNTIME_CC2590)
    377          #error "ERROR: HAL_PA_LNA_CC2590 and MAC_RUNTIME_CC2590 cannot be both defined."
    378          #endif
    379          
    380          
    381          /**************************************************************************************************
    382           */

   Maximum stack usage in bytes:

     Function             ISTACK PSTACK XSTACK
     --------             ------ ------ ------
     MAC_SetRadioRegTable     2      0      0
     macRadioTurnOffPower     2      0      0
     macRadioTurnOnPower      2      0      0
       -> macMemWriteRam      4      0      0


   Segment part sizes:

     Function/Label               Bytes
     --------------               -----
     macRadioDefsTxPwrCC2591        13
     macRadioDefsTxPwrTables         2
     macRadioDefsRssiAdj             2
     macRadioDefsRefTableId          1
     MAC_SetRadioRegTable           20
     ?Subroutine0                    8
     macRadioTurnOnPower            99
     macRadioTurnOffPower           12
     ??MAC_SetRadioRegTable?relay    6
     ??macRadioTurnOnPower?relay     6
     ??macRadioTurnOffPower?relay    6

 
 139 bytes in segment BANKED_CODE
  18 bytes in segment BANK_RELAYS
  17 bytes in segment CODE_C
   1 byte  in segment XDATA_Z
 
 174 bytes of CODE  memory
   1 byte  of XDATA memory

Errors: none
Warnings: none
